jQuery(document).ready(function(e){if(woocommerce_params.option_ajax_add_to_cart=="yes"){e(".add_to_cart_button").live("click",function(){var o=e(this);if(o.is(".product_type_simple, .product_type_downloadable, .product_type_virtual")){if(!o.attr("data-product_id")){return true}o.removeClass("added");o.addClass("loading");var p={action:"woocommerce_add_to_cart",product_id:o.attr("data-product_id"),security:woocommerce_params.add_to_cart_nonce};e("body").trigger("adding_to_cart");e.post(woocommerce_params.ajax_url,p,function(q){o.removeClass("loading");p=e.parseJSON(q);if(p.error&&p.product_url){window.location=p.product_url;return}fragments=p;if(fragments){e.each(fragments,function(r,s){e(r).addClass("updating")})}e(".widget_shopping_cart, .shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{background:"transparent url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});o.addClass("added");if(e(".widget_shopping_cart").size()>0){e(".widget_shopping_cart:eq(0)").load(window.location+" .widget_shopping_cart:eq(0) > *",function(){if(fragments){e.each(fragments,function(r,s){e(r).replaceWith(s)})}e(".widget_shopping_cart, .updating").css("opacity","1").unblock();e("body").trigger("cart_widget_refreshed")})}else{if(fragments){e.each(fragments,function(r,s){e(r).replaceWith(s)})}e(".widget_shopping_cart, .updating").css("opacity","1").unblock()}e(".shop_table.cart").load(window.location+" .shop_table.cart:eq(0) > *",function(){e("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />');e(".shop_table.cart").css("opacity","1").unblock();e("body").trigger("cart_page_refreshed")});e(".cart_totals").load(window.location+" .cart_totals:eq(0) > *",function(){e(".cart_totals").css("opacity","1").unblock()});e("body").trigger("added_to_cart")});return false}else{return true}})}e("select.orderby").change(function(){e(this).closest("form").submit()});e("#rating").hide().before('<p class="stars"><span><a class="star-1" href="#">1</a><a class="star-2" href="#">2</a><a class="star-3" href="#">3</a><a class="star-4" href="#">4</a><a class="star-5" href="#">5</a></span></p>');e("p.stars a").click(function(){var o=e(this);e("#rating").val(o.text());e("p.stars a").removeClass("active");o.addClass("active");return false});e("#review_form #submit").live("click",function(){var o=e("#rating").val();if(e("#rating").size()>0&&!o&&woocommerce_params.review_rating_required=="yes"){alert(woocommerce_params.required_rating_text);return false}});e("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />');e("div.quantity:not(.cart div.quantity), td.quantity").find(".qty").each(function(){var o=parseInt(e(this).attr("data-min"));if(o&&o>1&&parseInt(e(this).val())<o){e(this).val(o)}});e(".plus").live("click",function(){var p=parseInt(e(this).prev(".qty").val());if(!p||p==""||p=="NaN"){p=0}$qty=e(this).prev(".qty");var o=parseInt($qty.attr("data-max"));if(o==""||o=="NaN"){o=""}if(o&&(o==p||p>o)){$qty.val(o)}else{$qty.val(p+1)}$qty.trigger("change")});e(".minus").live("click",function(){var o=parseInt(e(this).next(".qty").val());if(!o||o==""||o=="NaN"){o=0}$qty=e(this).next(".qty");var p=parseInt($qty.attr("data-min"));if(p==""||p=="NaN"){p=0}if(p&&(p==o||o<p)){$qty.val(p)}else{if(o>0){$qty.val(o-1)}}$qty.trigger("change")});var b=woocommerce_params.countries.replace(/&quot;/g,'"');var l=e.parseJSON(b);e("select.country_to_state").change(function(){var s=e(this).val();var p=e(this).closest("div").find("#billing_state, #shipping_state, #calc_shipping_state");var r=p.parent();var t=p.attr("name");var o=p.attr("id");var q=p.val();if(l[s]){if(l[s].length==0){r.fadeOut(200,function(){p.parent().find(".chzn-container").remove();p.replaceWith('<input type="hidden" class="hidden" name="'+t+'" id="'+o+'" value="" />');e("body").trigger("country_to_state_changed",[s,e(this).closest("div")])})}else{r.fadeOut(200,function(){var v="";var w=l[s];for(var u in w){v=v+'<option value="'+u+'">'+w[u]+"</option>"}if(p.is("input")){p.replaceWith('<select name="'+t+'" id="'+o+'" class="state_select"></select>');p=e(this).closest("div").find("#billing_state, #shipping_state, #calc_shipping_state")}p.html('<option value="">'+woocommerce_params.select_state_text+"</option>"+v);p.val(q);e("body").trigger("country_to_state_changed",[s,e(this).closest("div")]);r.fadeIn(500)})}}else{if(p.is("select")){r.fadeOut(200,function(){r.find(".chzn-container").remove();p.replaceWith('<input type="text" class="input-text" name="'+t+'" id="'+o+'" />');e("body").trigger("country_to_state_changed",[s,e(this).closest("div")]);r.fadeIn(500)})}else{if(p.is(".hidden")){r.find(".chzn-container").remove();p.replaceWith('<input type="text" class="input-text" name="'+t+'" id="'+o+'" />');e("body").trigger("country_to_state_changed",[s,e(this).closest("div")]);r.delay(200).fadeIn(500)}}}e("body").delay(200).trigger("country_to_state_changing",[s,e(this).closest("div")])}).change();e("div.woocommerce_tabs .panel").hide();e("div.woocommerce_tabs ul.tabs li a").click(function(){var p=e(this);var o=p.closest("div.woocommerce_tabs");e("ul.tabs li",o).removeClass("active");e("div.panel",o).hide();e("div"+p.attr("href")).show();p.parent().addClass("active");return false});e("div.woocommerce_tabs").each(function(){var o=window.location.hash;if(o.toLowerCase().indexOf("comment-")>=0){e("ul.tabs li.reviews_tab a",e(this)).click()}else{e("ul.tabs li:first a",e(this)).click()}});e(".shipping-calculator-form").hide();e(".shipping-calculator-button").click(function(){e(".shipping-calculator-form").slideToggle("slow");return false});e(".reset_variations").click(function(){e(".variations select").val("").change();return false}).css("visibility","hidden");function a(s,r){var o=true;for(name in s){var q=s[name];var p=r[name];if(q.length!=0&&p.length!=0&&q!=p){o=false}}return o}function n(q){var s=[];for(var p=0;p<product_variations.length;p++){var o=product_variations[p];var r=o.variation_id;if(a(o.attributes,q)){s.push(o)}}return s}function h(o){e(".variations select").each(function(s,t){current_attr_select=e(t);current_attr_select.find("option:gt(0)").attr("disabled","disabled");var r=current_attr_select.attr("name");for(num in o){var p=o[num].attributes;for(attr_name in p){var q=p[attr_name];if(attr_name==r){if(q){q=e("<div/>").html(q).text();q=q.replace(/'/g,"\\'");q=q.replace(/"/g,'\\"');current_attr_select.find('option[value="'+q+'"]').removeAttr("disabled")}else{current_attr_select.find("option").removeAttr("disabled")}}}}});e(document).trigger("woocommerce_update_variation_values")}function g(q){var o=e("div.images img:eq(0)");var u=e("div.images a.zoom:eq(0)");var t=e(o).attr("original-src");var s=e(u).attr("original-href");var r=q.image_src;var p=q.image_link;e(".variations_button").show();e(".single_variation").html(q.price_html+q.availability_html);if(!t){e(o).attr("original-src",e(o).attr("src"))}if(!s){e(u).attr("original-href",e(u).attr("href"))}if(r&&r.length>1){e(o).attr("src",r);e(u).attr("href",p)}else{e(o).attr("src",t);e(u).attr("href",s)}if(q.sku){e(".product_meta").find(".sku").text(q.sku)}else{e(".product_meta").find(".sku").text("")}if(q.min_qty){e(".single_variation_wrap").find("input[name=quantity]").attr("data-min",q.min_qty).val(q.min_qty)}else{e(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-min")}if(q.max_qty){e(".single_variation_wrap").find("input[name=quantity]").attr("data-max",q.max_qty)}else{e(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-max")}if(q.is_virtual=="yes"&&q.is_downloadable=="yes"&&woocommerce_params.option_limit_download_qty=="yes"){e(".single_variation_wrap").find("input[name=quantity]").attr("data-max",1)}e(".single_variation_wrap").slideDown("200").trigger("variationWrapShown").trigger("show_variation")}function c(q){var p=true;var o=false;var s={};e(".variations select").each(function(){if(q&&e(this).attr("name")==q){p=false;s[e(this).attr("name")]=""}else{if(e(this).val().length==0){p=false}else{o=true}value=e(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s[e(this).attr("name")]=value}});var t=n(s);if(p){var r=t.pop();if(r){e("form input[name=variation_id]").val(r.variation_id).change();g(r)}else{e(".variations select").val("")}}else{h(t)}if(o){if(e(".reset_variations").css("visibility")=="hidden"){e(".reset_variations").css("visibility","visible").hide().fadeIn()}}else{e(".reset_variations").css("visibility","hidden")}}e(".variations select").change(function(){e("form input[name=variation_id]").val("").change();e(".single_variation_wrap").hide();e(".single_variation").text("");c();e(this).blur();if(e().uniform&&e.isFunction(e.uniform.update)){e.uniform.update()}}).focus(function(){c(e(this).attr("name"))}).change();if(woocommerce_params.is_cart==1){e("select#shipping_method").live("change",function(){var p=e("#shipping_method").val();e("div.cart_totals").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var o={action:"woocommerce_update_shipping_method",security:woocommerce_params.update_shipping_method_nonce,shipping_method:p};e.post(woocommerce_params.ajax_url,o,function(q){e("div.cart_totals").replaceWith(q);e("body").trigger("updated_shipping_method")})})}if(woocommerce_params.is_checkout==1||woocommerce_params.is_pay_page==1){var m;var k;function d(){if(k){k.abort()}var o=e("#shipping_method").val();var q=e("#order_review input[name=payment_method]:checked").val();var r=e("#billing_country").val();var p=e("#billing_state").val();var t=e("input#billing_postcode").val();if(e("#shiptobilling input").is(":checked")||e("#shiptobilling input").size()==0){var w=r;var u=p;var v=t}else{var w=e("#shipping_country").val();var u=e("#shipping_state").val();var v=e("input#shipping_postcode").val()}e("#order_methods, #order_review").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var s={action:"woocommerce_update_order_review",security:woocommerce_params.update_order_review_nonce,shipping_method:o,payment_method:q,country:r,state:p,postcode:t,s_country:w,s_state:u,s_postcode:v,post_data:e("form.checkout").serialize()};k=e.ajax({type:"POST",url:woocommerce_params.ajax_url,data:s,success:function(x){e("#order_review").after(x).remove();e("#order_review input[name=payment_method]:checked").click();e("body").trigger("updated_checkout")}})}e("body").bind("update_checkout",function(){clearTimeout(m);d()});e("p.password, form.login, form.checkout_coupon, div.shipping_address").hide();e("input.show_password").change(function(){e("p.password").slideToggle()});e("a.showlogin").click(function(){e("form.login").slideToggle();return false});e("a.showcoupon").click(function(){e("form.checkout_coupon").slideToggle();return false});e("#shiptobilling input").change(function(){e("div.shipping_address").hide();if(!e(this).is(":checked")){e("div.shipping_address").slideDown()}}).change();if(woocommerce_params.option_guest_checkout=="yes"){e("div.create-account").hide();e("input#createaccount").change(function(){e("div.create-account").hide();if(e(this).is(":checked")){e("div.create-account").slideDown()}}).change()}e(".payment_methods input.input-radio").live("click",function(){e("div.payment_box").hide();if(e(this).is(":checked")){e("div.payment_box."+e(this).attr("ID")).slideDown()}});e("#order_review input[name=payment_method]:checked").click();e("#shipping_method").live("change",function(){e("body").trigger("update_checkout")});e("input#billing_country, input#billing_state, #billing_postcode, input#shipping_country, input#shipping_state, #shipping_postcode").live("keydown",function(){clearTimeout(m);m=setTimeout(d,"1000")});e("select#billing_country, select#billing_state, select#shipping_country, select#shipping_state, #shiptobilling input, .update_totals_on_change").live("change",function(){e("body").trigger("update_checkout")});if(woocommerce_params.is_checkout==1){e("body").trigger("update_checkout")}e("form.checkout").submit(function(){var o=e(this);if(o.is(".processing")){return false}o.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});e.ajax({type:"POST",url:woocommerce_params.checkout_url,data:o.serialize(),success:function(q){e(".woocommerce_error, .woocommerce_message").remove();try{result=e.parseJSON(q);if(result.result=="success"){window.location=decodeURI(result.redirect)}else{if(result.result=="failure"){o.prepend(result.messages);o.removeClass("processing").unblock();if(result.refresh=="true"){e("body").trigger("update_checkout")}e("html, body").animate({scrollTop:(e("form.checkout").offset().top-100)},1000)}else{throw"Invalid response"}}}catch(p){o.prepend(q);o.removeClass("processing").unblock();e("html, body").animate({scrollTop:(e("form.checkout").offset().top-100)},1000)}},dataType:"html"});return false});var j=woocommerce_params.locale.replace(/&quot;/g,'"');var i=e.parseJSON(j);var f=' <abbr class="required" title="'+woocommerce_params.required_text+'">*</abbr>';e("body").bind("country_to_state_changing",function(r,t,v){var s=v;if(i[t]){var q=i[t]}else{var q=i["default"]}var u={address_2:"#billing_address_2_field, #shipping_address_2_field",state:"#billing_state_field, #shipping_state_field",postcode:"#billing_postcode_field, #shipping_postcode_field",city:"#billing_city_field, #shipping_city_field"};e.each(u,function(w,x){var y=s.find(x);if(q[w]){if(q[w]["label"]){y.find("label").html(q[w]["label"])}if(q[w]["placeholder"]){y.find("input").attr("placeholder",q[w]["placeholder"])}y.find("label abbr").remove();if(typeof q[w]["required"]=="undefined"||q[w]["required"]==true){y.find("label").append(f)}if(w!=="state"){if(q[w]["hidden"]==true){y.fadeOut(200).find("input").val("")}else{y.fadeIn(500)}}}else{if(i["default"][w]["required"]==true){if(y.find("label abbr").size()==0){y.find("label").append(f)}}if(w!=="state"&&(typeof i["default"][w]["hidden"]=="undefined"||i["default"][w]["hidden"]==false)){y.fadeIn(500)}}});var p=s.find("#billing_postcode_field, #shipping_postcode_field");var o=s.find("#billing_city_field, #shipping_city_field");if(q.postcode_before_city){if(o.is(".form-row-first")){o.fadeOut(200,function(){o.removeClass("form-row-first").addClass("form-row-last").insertAfter(p).fadeIn(500)});p.fadeOut(200,function(){p.removeClass("form-row-last").addClass("form-row-first").fadeIn(500)})}}else{if(o.is(".form-row-last")){o.fadeOut(200,function(){o.removeClass("form-row-last").addClass("form-row-first").insertBefore(p).fadeIn(500)});p.fadeOut(200,function(){p.removeClass("form-row-first").addClass("form-row-last").fadeIn(500)})}}})}});